{"componentChunkName":"component---packages-blog-gatsby-blog-core-src-templates-post-js","path":"/deploying-multiple-services-on-a-single-aws-elastic-beanstalk-application/","result":{"data":{"post":{"id":"0b249b43-bcfa-5617-9f11-2c0d83a40f61","title":"Deploying multiple services on a single AWS Elastic Beanstalk Application","slug":"/deploying-multiple-services-on-a-single-aws-elastic-beanstalk-application/","link":null,"excerpt":"I needed to deploy nextjs app with ssr support and rest API built with nestjs. This is how I…","tableOfContents":{},"timeToRead":1,"featured":null,"protected":null,"thumbnailText":null,"date":"August 27, 2022","category":{"id":"bde2f8c6-ff59-5f29-83ce-04e1f55ced60","name":"Devops","slug":"/category/devops/","color":null,"icon":null},"author":{"id":"b21b4c96-bb41-58f1-aea0-1964dbeb2177","name":"Evgeni Leonti","slug":"/author/evgeni-leonti/","title":"Software Engineer","description":null,"skills":[],"social":null,"thumbnail":{"__typename":"ImageSharp","ImageSharp_small":{"layout":"fixed","placeholder":{"fallback":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20preserveAspectRatio='none'%3e%3cpath%20d='M22%203c-2%201-3%204-4%207l-2%205c-2%202-2%202-2-1l-2-3c-1%200-1%202%202%208%200%202%202%203%204%204%202%200%203%202%203%203h1c1-1%201-2-2-4l-4-5h1l2%201v-2c-2-1-2-1%200-1l2-2c0-6%204-9%2011-9%204%200%204%200%205%204v16c-1%201-1%201%200%200%202-3%203-11%201-19l-1-5h-6c-5%200-7%200-9%203m4%2023l3%202%203%201-2%203-2%203-4-4-5-4v21h18l-1-5c0-6%201-5%203%201l1%204v-5l-1-9c0-3-1-4-2-5-2-1-2-1-2%201%202%203%202%205%201%207-1%201-1-1-1-9%200-1-1-2-3-1l-4-1h-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e"},"images":{"fallback":{"src":"/static/04950f7ed043f1a244fab5d255f967a3/a7a66/john_doe_cf5a539c00.png","srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/a7a66/john_doe_cf5a539c00.png 48w,\n/static/04950f7ed043f1a244fab5d255f967a3/416a0/john_doe_cf5a539c00.png 96w","sizes":"48px"},"sources":[{"srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/a3542/john_doe_cf5a539c00.webp 48w,\n/static/04950f7ed043f1a244fab5d255f967a3/0f66d/john_doe_cf5a539c00.webp 96w","type":"image/webp","sizes":"48px"}]},"width":48,"height":48},"ImageSharp_regular":{"layout":"fixed","placeholder":{"fallback":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20preserveAspectRatio='none'%3e%3cpath%20d='M22%203c-2%201-3%204-4%207l-2%205c-2%202-2%202-2-1l-2-3c-1%200-1%202%202%208%200%202%202%203%204%204%202%200%203%202%203%203h1c1-1%201-2-2-4l-4-5h1l2%201v-2c-2-1-2-1%200-1l2-2c0-6%204-9%2011-9%204%200%204%200%205%204v16c-1%201-1%201%200%200%202-3%203-11%201-19l-1-5h-6c-5%200-7%200-9%203m4%2023l3%202%203%201-2%203-2%203-4-4-5-4v21h18l-1-5c0-6%201-5%203%201l1%204v-5l-1-9c0-3-1-4-2-5-2-1-2-1-2%201%202%203%202%205%201%207-1%201-1-1-1-9%200-1-1-2-3-1l-4-1h-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e"},"images":{"fallback":{"src":"/static/04950f7ed043f1a244fab5d255f967a3/46e60/john_doe_cf5a539c00.png","srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/46e60/john_doe_cf5a539c00.png 150w,\n/static/04950f7ed043f1a244fab5d255f967a3/d612b/john_doe_cf5a539c00.png 300w","sizes":"150px"},"sources":[{"srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/ae23d/john_doe_cf5a539c00.webp 150w,\n/static/04950f7ed043f1a244fab5d255f967a3/bd37b/john_doe_cf5a539c00.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I needed to deploy nextjs app with ssr support and rest API built with nestjs. This is how I deployed 2 web servers on a a single instance of Elastic Beanstalk, and automated the process with Github actions.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"name: Deploy master\\non:\\n  push:\\n    branches:\\n      - master\\n\\njobs:\\n  build:\\n    runs-on: ubuntu-latest\\n    steps:\\n\\n      - name: Checkout source code\\n        uses: actions/checkout@v2\\n\\n      - name: List current dir\\n        run: ls -al\\n\\n      - name: Install API depencdencies and build\\n        run: cd server && npm ci && npm run build\\n\\n      - name: Install UI depencdencies and build\\n        run: cd app-ui && npm ci --force && npm run build-prod\\n\\n      - name: Generate deployment package\\n        run: zip -q -r deploy.zip . -x '*.git*'\\n\\n      - name: Deploy to EB\\n        uses: einaregilsson/beanstalk-deploy@v20\\n        with:\\n          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}\\n          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\\n          application_name: leonti.codes\\n          environment_name: leonticodes-prod\\n          version_label: 15055\\n          region: eu-west-1\\n          deployment_package: deploy.zip\\n\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","keywords":[],"tags":[{"id":"46427249-b872-567a-9999-8f514c0c3e71","name":"#aws","slug":"/tag/aws/"},{"id":"64220f3e-2808-5e32-8bc2-b0fd64daaa98","name":"#elastic-beanstalk","slug":"/tag/elastic-beanstalk/"},{"id":"526fe6f8-7a0d-5410-9fa1-75a42d7de55f","name":"#github","slug":"/tag/github/"}],"thumbnail":{"__typename":"ImageSharp","ImageSharp_vertical":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/ba191131577550a78248778433720e35/19188/elastic_beanstalk_e2ad4b7ffe.png","srcSet":"/static/ba191131577550a78248778433720e35/db297/elastic_beanstalk_e2ad4b7ffe.png 190w,\n/static/ba191131577550a78248778433720e35/19188/elastic_beanstalk_e2ad4b7ffe.png 380w","sizes":"(min-width: 380px) 380px, 100vw"},"sources":[{"srcSet":"/static/ba191131577550a78248778433720e35/228d6/elastic_beanstalk_e2ad4b7ffe.webp 190w,\n/static/ba191131577550a78248778433720e35/6b99c/elastic_beanstalk_e2ad4b7ffe.webp 380w","type":"image/webp","sizes":"(min-width: 380px) 380px, 100vw"}]},"width":380,"height":290},"ImageSharp_hero":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/ba191131577550a78248778433720e35/5f2a3/elastic_beanstalk_e2ad4b7ffe.png","srcSet":"/static/ba191131577550a78248778433720e35/85460/elastic_beanstalk_e2ad4b7ffe.png 368w,\n/static/ba191131577550a78248778433720e35/5f2a3/elastic_beanstalk_e2ad4b7ffe.png 736w","sizes":"(min-width: 736px) 736px, 100vw"},"sources":[{"srcSet":"/static/ba191131577550a78248778433720e35/09e5c/elastic_beanstalk_e2ad4b7ffe.webp 368w,\n/static/ba191131577550a78248778433720e35/a6165/elastic_beanstalk_e2ad4b7ffe.webp 736w","type":"image/webp","sizes":"(min-width: 736px) 736px, 100vw"}]},"width":1600,"height":650}}},"tagCategoryPosts":{"nodes":[]},"tagPosts":{"nodes":[]},"categoryPosts":{"nodes":[{"id":"3972ff6c-48a7-5925-bfad-9dc3b1ba48d5","title":"Docker cheatsheet commands for a web developer","slug":"/docker-cheatsheet-commands-for-a-web-developer/","link":null,"excerpt":"This post is about common docker commands which can be very useful for backend developers…","timeToRead":1,"featured":null,"thumbnailText":null,"date":"August 18, 2022","category":{"id":"bde2f8c6-ff59-5f29-83ce-04e1f55ced60","name":"Devops","slug":"/category/devops/","color":null,"icon":null},"author":{"id":"b21b4c96-bb41-58f1-aea0-1964dbeb2177","name":"Evgeni Leonti","slug":"/author/evgeni-leonti/","title":"Software Engineer","description":null,"skills":[],"social":null,"thumbnail":{"__typename":"ImageSharp","ImageSharp_small":{"layout":"fixed","placeholder":{"fallback":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20preserveAspectRatio='none'%3e%3cpath%20d='M22%203c-2%201-3%204-4%207l-2%205c-2%202-2%202-2-1l-2-3c-1%200-1%202%202%208%200%202%202%203%204%204%202%200%203%202%203%203h1c1-1%201-2-2-4l-4-5h1l2%201v-2c-2-1-2-1%200-1l2-2c0-6%204-9%2011-9%204%200%204%200%205%204v16c-1%201-1%201%200%200%202-3%203-11%201-19l-1-5h-6c-5%200-7%200-9%203m4%2023l3%202%203%201-2%203-2%203-4-4-5-4v21h18l-1-5c0-6%201-5%203%201l1%204v-5l-1-9c0-3-1-4-2-5-2-1-2-1-2%201%202%203%202%205%201%207-1%201-1-1-1-9%200-1-1-2-3-1l-4-1h-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e"},"images":{"fallback":{"src":"/static/04950f7ed043f1a244fab5d255f967a3/a7a66/john_doe_cf5a539c00.png","srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/a7a66/john_doe_cf5a539c00.png 48w,\n/static/04950f7ed043f1a244fab5d255f967a3/416a0/john_doe_cf5a539c00.png 96w","sizes":"48px"},"sources":[{"srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/a3542/john_doe_cf5a539c00.webp 48w,\n/static/04950f7ed043f1a244fab5d255f967a3/0f66d/john_doe_cf5a539c00.webp 96w","type":"image/webp","sizes":"48px"}]},"width":48,"height":48},"ImageSharp_regular":{"layout":"fixed","placeholder":{"fallback":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20preserveAspectRatio='none'%3e%3cpath%20d='M22%203c-2%201-3%204-4%207l-2%205c-2%202-2%202-2-1l-2-3c-1%200-1%202%202%208%200%202%202%203%204%204%202%200%203%202%203%203h1c1-1%201-2-2-4l-4-5h1l2%201v-2c-2-1-2-1%200-1l2-2c0-6%204-9%2011-9%204%200%204%200%205%204v16c-1%201-1%201%200%200%202-3%203-11%201-19l-1-5h-6c-5%200-7%200-9%203m4%2023l3%202%203%201-2%203-2%203-4-4-5-4v21h18l-1-5c0-6%201-5%203%201l1%204v-5l-1-9c0-3-1-4-2-5-2-1-2-1-2%201%202%203%202%205%201%207-1%201-1-1-1-9%200-1-1-2-3-1l-4-1h-2'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e"},"images":{"fallback":{"src":"/static/04950f7ed043f1a244fab5d255f967a3/46e60/john_doe_cf5a539c00.png","srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/46e60/john_doe_cf5a539c00.png 150w,\n/static/04950f7ed043f1a244fab5d255f967a3/d612b/john_doe_cf5a539c00.png 300w","sizes":"150px"},"sources":[{"srcSet":"/static/04950f7ed043f1a244fab5d255f967a3/ae23d/john_doe_cf5a539c00.webp 150w,\n/static/04950f7ed043f1a244fab5d255f967a3/bd37b/john_doe_cf5a539c00.webp 300w","type":"image/webp","sizes":"150px"}]},"width":150,"height":150}}},"thumbnail":null}]},"previous":{"id":"9ee576c3-8fc6-5b04-adc2-5235bfd90011","slug":"/useful-google-drive-api-javascript-examples/","title":"Useful Google Drive API Javascript Examples"},"next":{"id":"24db511c-9515-54e8-9ed1-2b7ec84ac3f2","slug":"/automatic-cloud-data-backup-to-usb-drive-with-rclone-and-raspberry-pi-4/","title":"Automatic cloud data backup to USB drive with Rclone & Raspberry Pi 4"}},"pageContext":{"id":"0b249b43-bcfa-5617-9f11-2c0d83a40f61","categoryId":"bde2f8c6-ff59-5f29-83ce-04e1f55ced60","tagsIds":["46427249-b872-567a-9999-8f514c0c3e71","64220f3e-2808-5e32-8bc2-b0fd64daaa98","526fe6f8-7a0d-5410-9fa1-75a42d7de55f"],"hasTags":true,"previousId":"9ee576c3-8fc6-5b04-adc2-5235bfd90011","nextId":"24db511c-9515-54e8-9ed1-2b7ec84ac3f2","paginatePostsPage":true,"basePath":"/","services":{"algolia":true,"mailchimp":false,"disqus":false,"graphComment":true,"facebookComment":false},"siteUrl":null,"mobileMenu":{"title":"Topics","items":[{"name":"Backend","slug":"/category/backend/"},{"name":"Frontend","slug":"/category/frontend/"},{"name":"Devops","slug":"/category/devops/"},{"name":"Raspberry Pi","slug":"/category/raspberry-pi/"},{"name":"Beginners","slug":"/category/beginners/"}]},"darkMode":true,"includeExcerpt":true,"includeTimeToRead":true,"includeTableOfContents":true,"imageQuality":75}},"staticQueryHashes":["1992822086","2409295108","2918496967","2981853053","4235339838","4240507859"]}